{"version":3,"sources":["services/persons.js","notification.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","type","className","Persons","persons","filter","deletePerson","nameList","person","name","toLocaleLowerCase","indexOf","map","key","number","onClick","Filter","handleFilterChange","value","onChange","PersonForm","newName","newNumber","handleNameChange","handleNumberChange","handleAddPerson","App","useState","setPersons","setNewName","setNewNumber","setFilter","infoMessage","setInfoMessage","errorMessage","setErrorMessage","getPersons","personServices","initPersons","useEffect","event","target","preventDefault","found","find","x","returnedPerson","setTimeout","catch","reduce","prev","current","concat","error","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.072e510d.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { \r\n  getAll: getAll, \r\n  create: create, \r\n  update: update,\r\n  remove: remove \r\n}","import React from 'react'\r\n\r\nconst Notification = ({message, type}) => {\r\n  if(message === null){\r\n    return null\r\n  }\r\n\r\n  return(\r\n    <div className={type === 'error' ? 'error' : 'info'}> \r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport personServices from './services/persons'\r\nimport Notification from './notification'\r\nimport './index.css'\r\n\r\nconst Persons = ({persons, filter, deletePerson}) => {\r\n  const nameList = persons.filter(person => {\r\n    if(filter === '') return true;\r\n    \r\n    if(person.name.toLocaleLowerCase().indexOf(filter.toLocaleLowerCase()) !== -1){\r\n      return true\r\n    }\r\n\r\n    return false;\r\n  }).map(person => (\r\n    <div key={person.id}>\r\n      {`${person.name} ${person.number} `} \r\n      <button onClick={() => deletePerson(person.id)}>delete</button>\r\n    </div>\r\n  ))\r\n  \r\n  return(\r\n    <div>\r\n      {nameList}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Filter = ({filter, handleFilterChange}) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input value={filter} onChange={handleFilterChange}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst PersonForm = ({newName, newNumber, handleNameChange, handleNumberChange, handleAddPerson}) => {\r\n  return (\r\n    <div>\r\n      <form>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange}/>\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={handleNumberChange}/>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\" onClick={handleAddPerson}>add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n  const [ infoMessage, setInfoMessage ] = useState(null)\r\n  const [ errorMessage, setErrorMessage ] = useState(null)\r\n\r\n  const handleNameChange = (event) => setNewName(event.target.value)\r\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\r\n  const handleFilterChange = (event) => setFilter(event.target.value)\r\n  \r\n  const getPersons = () => {\r\n    personServices\r\n    .getAll()\r\n    .then(initPersons => {\r\n      setPersons(initPersons)\r\n    })\r\n  }\r\n\r\n  const createPerson = () => {\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    personServices\r\n      .create(newPerson)\r\n      .then(returnedPerson => {\r\n        \r\n        setPersons(persons.concat(returnedPerson))\r\n        setNewName(\"\")\r\n        setNewNumber(\"\")\r\n\r\n        setInfoMessage(`Added ${returnedPerson.name}`)\r\n        setTimeout(() => { \r\n          setInfoMessage(null)\r\n        }, 5000)\r\n      })\r\n      \r\n      .catch(error => {\r\n        setErrorMessage(error.response.data.error)\r\n        setTimeout(() => { \r\n          setErrorMessage(null)\r\n        }, 5000)\r\n      })\r\n  }\r\n\r\n  const updatePerson = (id) => {\r\n    personServices\r\n      .update(id, {\r\n        name: newName,\r\n        number: newNumber\r\n      })\r\n      .then(returnedPerson => {\r\n        setPersons(persons.map(person => person.id === returnedPerson.id \r\n          ? returnedPerson\r\n          : person\r\n        ))\r\n\r\n        setNewName(\"\")\r\n        setNewNumber(\"\")\r\n\r\n        setInfoMessage(`Updated ${returnedPerson.name}`)\r\n        setTimeout(() => { \r\n          setInfoMessage(null)\r\n        }, 5000)\r\n      })\r\n      .catch(() =>{\r\n        const person = persons.reduce((prev, current) => \r\n          current.id === id ? {name: current.name} : prev,\r\n          {name: \"-\"}\r\n        )\r\n        \r\n        setErrorMessage(`Information of ${person.name} has already been removed from server`)\r\n        setTimeout(() => { \r\n          setErrorMessage(null)\r\n        }, 5000)\r\n        \r\n        getPersons()\r\n      })\r\n  }\r\n \r\n  const deletePerson = (id) => {\r\n    const person = persons.reduce((prev, current) => \r\n      current.id === id ? {name: current.name} : prev,\r\n      {name: \"-\"}\r\n    )\r\n    if(window.confirm(`Delete ${person.name}?`)){      \r\n      personServices\r\n        .remove(id)\r\n        .then(() => {\r\n          getPersons()\r\n\r\n          setInfoMessage(`Deleted ${person.name}`)\r\n          setTimeout(() => { \r\n            setInfoMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(() =>{\r\n          getPersons()\r\n\r\n          setErrorMessage(`Information of ${person.name} has already been removed from server`)\r\n          setTimeout(() => { \r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  useEffect(getPersons, [])\r\n  \r\n  const handleAddPerson = (event) => {\r\n    event.preventDefault();\r\n    const found = persons.find(x => x.name === newName)\r\n    \r\n    if(found){\r\n      updatePerson(found.id)\r\n    }else{\r\n      createPerson();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification type='info' message={infoMessage} />\r\n      <Notification type='error' message={errorMessage} />\r\n      <Filter \r\n        filter={filter}\r\n        handleFilterChange={handleFilterChange}\r\n      />\r\n\r\n      <h2>Add a new</h2>\r\n      <PersonForm\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n        handleAddPerson={handleAddPerson}\r\n      />\r\n\r\n      <h2>Numbers</h2>\r\n      <Persons \r\n        persons={persons}\r\n        filter={filter}\r\n        deletePerson={deletePerson}\r\n      />\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}